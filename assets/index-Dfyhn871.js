(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const c of d.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(r){if(r.ep)return;r.ep=!0;const d=n(r);fetch(r.href,d)}})();const m=document.createElement("div"),L=document.createElement("h1"),i=document.createElement("form"),a=document.createElement("div");a.classList.add("upload-zone_dragover");i.prepend(a);m.classList.add("wrapper");document.body.appendChild(m);L.textContent="Drag and Drop";L.classList.add("h1");i.classList.add("form");i.id="formElem";m.appendChild(L);m.appendChild(i);const C=document.createElement("h2");C.classList.add("h2");C.textContent="Перетащите сюда файлы";a.appendChild(C);const P=document.createElement("p");P.textContent="или";a.appendChild(P);const f=document.createElement("label");f.classList.add("label");a.appendChild(f);const y=document.createElement("span");y.id="preloadData";y.textContent="Загрузите файлы";f.appendChild(y);const o=document.createElement("input");f.appendChild(o);o.type="file";o.multiple="true";o.accept=".jpeg, .jpg, .png";o.name="file";o.classList.add("input");o.addEventListener("change",z);const h=document.createElement("button");h.type="submit";h.textContent="Отправить";h.classList.add("submit");a.appendChild(h);const b=document.createElement("span");a.appendChild(b);b.classList.add("error");const g=document.createElement("div");g.classList.add("board");const v=document.createElement("h3");v.classList.add("h3");v.textContent="Ваши файлы:";g.appendChild(v);i.appendChild(g);const T=document.createElement("div");T.classList.add("file-column");g.appendChild(T);function O(){document.querySelector("li").remove()}function A(e,t=2){const n=["Байт","КБ","МБ","ГБ","ТБ"],s=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,s),t)+" "+n[s]}const D=document.querySelector("#formElem");D.addEventListener("submit",async e=>{e.preventDefault();const t=new FormData(D);let s=await(await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:t})).json();console.log(s)});["dragover","drop"].forEach(function(e){document.addEventListener(e,t=>(t.preventDefault(),!1))});a.addEventListener("dragenter",()=>{a.classList.add("active")});a.addEventListener("dragleave",()=>{a.classList.remove("active")});a.addEventListener("drop",M);window.addEventListener("drop",e=>{[...e.dataTransfer.items].some(t=>t.kind==="file")&&e.preventDefault()});a.addEventListener("dragover",e=>{const t=[...e.dataTransfer.items].filter(n=>n.kind==="file");t.length>0&&(e.preventDefault(),t.some(n=>n.type.startsWith("image/png")||n.type.startsWith("image/jpg")||n.type.startsWith("image/jpeg"))?e.dataTransfer.dropEffect="copy":e.dataTransfer.dropEffect="none")});window.addEventListener("dragover",e=>{[...e.dataTransfer.items].filter(n=>n.kind==="file").length>0&&(e.preventDefault(),a.contains(e.target)||(e.dataTransfer.dropEffect="none"))});const u=document.createElement("ul");u.classList.add("file-list");T.appendChild(u);function j(e,t=10485760){if(e.length<=5)for(let n of e)if(n.size>t){const s=document.createElement("span");s.classList.add("error"),s.textContent="Превышен максимальный размер файла";const r=document.createElement("li");r.classList.add("list"),r.appendChild(s),r.appendChild(s),u.appendChild(r)}else{const s=document.createElement("li");s.classList.add("list"),s.draggable="true",s.textContent=`${n.name} ${A(n.size)} ${n.type}`,u.appendChild(s);const r=document.createElement("img");r.src=URL.createObjectURL(n),r.alt=n.name,r.classList.add("preview"),s.prepend(r);const d=document.createElement("button");d.textContent="Удалить ",d.classList.add("btn"),s.appendChild(d),d.addEventListener("click",O),S(""),document.querySelectorAll(".list").forEach(p=>{p.addEventListener("dragstart",E=>{p.id="dragged-list",E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("list","")}),p.addEventListener("draggend",E=>{p.removeAttribute("id")})})}else S("Превышено допустимое количество файлов: 5")}function M(e){e.preventDefault(),a.classList.remove("active");const t=[...e.dataTransfer.items].map(n=>n.getAsFile()).filter(n=>n);setTimeout(()=>{j(t)},2e3),setTimeout(()=>q(),1e3),setTimeout(()=>B(),1500)}function S(e){return b.textContent=e}function z(e){setTimeout(()=>{j(e.target.files)},2e3),setTimeout(()=>q(),1e3),setTimeout(()=>B(),1500)}const w=document.querySelectorAll(".file-column");w.forEach(e=>{e.addEventListener("dragover",t=>{t.dataTransfer.types.includes("list")&&t.preventDefault()})});w.forEach(e=>{e.addEventListener("drop",t=>{t.preventDefault();const n=document.getElementById("dragged-list");n.remove(),e.children[0].appendChild(n)})});function I(e){const t=document.createElement("li");return t.classList.add("placeholder"),t.style.height=`${e.offsetHeight}px`,t}function R(e){if(!e.dataTransfer.types.includes("list"))return;e.preventDefault();const t=document.getElementById("dragged-list"),n=e.currentTarget,s=n.children[0],r=n.querySelector(".placeholder");if(r){const d=r.getBoundingClientRect();if(d.top<=e.clientY&&d.bottom>=e.clientY)return}for(const d of s.children)if(d.getBoundingClientRect().bottom>=e.clientY){if(d===r||(r?.remove(),d===t||d.previousElementSibling===t))return;s.insertBefore(r??I(t),d);return}r?.remove(),s.lastElementChild!==t&&s.append(r??I(t))}w.forEach(e=>{e.addEventListener("dragover",R),e.addEventListener("dragleave",t=>{if(e.contains(t.relatedTarget))return;e.querySelector(".placeholder")?.remove()}),e.addEventListener("drop",t=>{t.preventDefault();const n=document.getElementById("dragged-list"),s=e.querySelector(".placeholder");s&&(n.remove(),e.children[0].insertBefore(n,s),s.remove())})});const x=document.createElement("div");x.classList.add("progress-bar");v.insertAdjacentElement("afterend",x);const l=document.createElement("div");l.classList.add("progress");l.id="progress";x.appendChild(l);function q(){let e=0;for(;e<200;)e=e+200,l.style.width=e+"px"}function B(){return l.style.width="0px"}
